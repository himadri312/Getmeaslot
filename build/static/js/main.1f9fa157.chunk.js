(this["webpackJsonpget-me-a-slot"]=this["webpackJsonpget-me-a-slot"]||[]).push([[0],{104:function(e,t,a){},105:function(e,t,a){},106:function(e,t,a){"use strict";a.r(t);var s=a(0),n=a.n(s),c=a(9),i=a.n(c),l=a(4),r=a(38),o=a(8),u=a(39),d=a(30),j=a(24),p=a(25),b=a(40),m=a(31),h=a(32),f=a(41),O=a(26),v=a(11),x=a.n(v),g=a(18);function y(e,t){return void 0===t||null===t||"string"===typeof t&&""===t.trim()||void 0!==e&&null!==e&&e===S(t)}function S(e){var t=e.getMonth()+1,a=e.getDate();return t<10&&(t="0"+t),a<10&&(a="0"+a),a+"-"+t+"-"+e.getFullYear()}var D,N=a(21),w=function(e){var t="",a=S(e.selectedDate);"searchByPin"===e.selectedSearch?t=e.showFutureDates?"https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/calendarByPin?pincode="+e.pin+"&date="+a:"https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/findByPin?pincode="+e.pin+"&date="+a:"searchByDistrict"===e.selectedSearch&&(t=e.showFutureDates?"https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/calendarByDistrict?district_id="+e.selectedDistrict+"&date="+a:"https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/findByDistrict?district_id="+e.selectedDistrict+"&date="+a),e.showFutureDates?(C({url:t,setDataSet:e.setDataSet}),e.autoRefresh&&(D=setInterval(Object(g.a)(x.a.mark((function a(){return x.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:C({url:t,setDataSet:e.setDataSet});case 1:case"end":return a.stop()}}),a)}))),5e3))):(F({url:t,setDataSet:e.setDataSet}),e.autoRefresh&&(D=setInterval(Object(g.a)(x.a.mark((function a(){return x.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:F({url:t,setDataSet:e.setDataSet});case 1:case"end":return a.stop()}}),a)}))),5e3)))},C=function(e){var t=e.url,a=e.setDataSet;t&&fetch(t,{headers:{Accept:"application/json"}}).then((function(e){return e.json()})).then((function(e){return a({slots:e})})).catch((function(e){return a({error:e})}))},F=function(e){var t=e.url,a=e.setDataSet;if(t){var s=(new Date).toLocaleString();fetch(t,{headers:{Accept:"application/json"}}).then((function(e){return e.json()})).then((function(e){return a(function(e,t){var a={errorMessage:"",timeStamp:t,slotList:[]};return e.length||(a.errorMessage="No slots available. Please refine search criteria"),e.forEach((function(e){var t={name:e.name,address:e.address,district_name:e.district_name,pincode:e.pincode,fee_type:e.fee_type,fee:e.fee,date:e.date,age:18===e.min_age_limit?"Age 18+":"Age 45+",vaccine:e.vaccine};e.available_capacity_dose1&&a.slotList.push(Object(N.a)(Object(N.a)({},t),{},{dose:"Dose1",doseCapacity:e.available_capacity_dose1})),e.available_capacity_dose2&&a.slotList.push(Object(N.a)(Object(N.a)({},t),{},{dose:"Dose2",doseCapacity:e.available_capacity_dose2}))})),a}(e.sessions,s))})).catch((function(e){return a(function(e,t){return{errorMessage:"Not able to connect Cowin server at ".concat(t,". If auto refresh is not checked please search again"),timeStamp:t,slotList:[]}}(0,s))}))}},k=function(){var e=Object(g.a)(x.a.mark((function e(t){var a,s,n,c;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(c in a=t.url,s=t.requestParams,n="",s)n=0===n.length?"?"+c+"="+s[c]:n+"&"+c+"="+s[c];return e.abrupt("return",fetch(a+n,{method:"GET",headers:{Accept:"application/json"}}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),B=a(1);function P(e){var t,a=e.statesList,c=e.setDataSet,i=e.displaySearchDialog,r=e.setDisplaySearchDialog,v=Object(s.useRef)(null),x=Object(s.useState)("searchByPin"),g=Object(l.a)(x,2),y=g[0],S=g[1],N=Object(s.useState)(),C=Object(l.a)(N,2),F=C[0],P=C[1],_=Object(s.useState)(""),I=Object(l.a)(_,2),A=I[0],E=I[1],L=Object(s.useState)(""),M=Object(l.a)(L,2),T=M[0],V=M[1],R=Object(s.useState)(!1),H=Object(l.a)(R,2),J=H[0],W=H[1],G=Object(s.useState)(!1),U=Object(l.a)(G,2),z=U[0],X=U[1],$=Object(s.useState)(!1),q=Object(l.a)($,2),Y=q[0],K=q[1],Q=Object(s.useState)(new Date),Z=Object(l.a)(Q,2),ee=Z[0],te=Z[1],ae=Object(s.useState)([]),se=Object(l.a)(ae,2),ne=se[0],ce=se[1],ie=Object(s.useState)(!0),le=Object(l.a)(ie,2),re=le[0],oe=le[1],ue=new Date;ue.setDate(ue.getDate()+6);var de=function(){/^[1-9][0-9]{5}$/.test(F)?(r(!1),z&&K(!0),w({selectedSearch:y,pin:F,selectedDate:ee,autoRefresh:z,showFutureDates:J,setDataSet:c})):v.current.show({sticky:!0,severity:"error",summary:"Invalid pincode"})},je=function(){T?(r(!1),z&&K(!0),w({selectedSearch:y,selectedDistrict:T,selectedDate:ee,autoRefresh:z,showFutureDates:J,setDataSet:c})):v.current.show({sticky:!0,severity:"error",summary:"Please select district"})};return t="searchByPin"===y?Object(B.jsxs)(n.a.Fragment,{children:[Object(B.jsx)(b.InputNumber,{value:F,onChange:function(e){return P(e.value)},className:"p-col-12",placeholder:"Enter Pincode",useGrouping:!1,disabled:Y}),Object(B.jsx)("div",{className:"p-col-12"})]}):"searchByDistrict"===y?Object(B.jsxs)(n.a.Fragment,{children:[Object(B.jsx)(h.Dropdown,{optionLabel:"state_name",optionValue:"state_id",value:A,options:a,onChange:function(e){return t=e.value,oe(!t),E(t),void k({url:"https://cdn-api.co-vin.in/api/v2/admin/location/districts"+"/".concat(t)}).then((function(e){return e.json()})).then((function(e){v&&v.current&&v.current.clear(),ce(e.districts)})).catch((function(e){v&&v.current&&(v.current.show({sticky:!0,severity:"error",summary:"Unable to fetch districts. Try again"}),ce([]))}));var t},placeholder:"Select state",className:"p-col-12",disabled:Y}),Object(B.jsx)(h.Dropdown,{optionLabel:"district_name",optionValue:"district_id",value:T,options:ne,onChange:function(e){return V(e.value)},className:"p-col-12",placeholder:"Select district",disabled:re||Y})]}):Object(B.jsx)("div",{children:"Something went wrong. Please reload"}),Object(B.jsx)(n.a.Fragment,{children:Object(B.jsxs)(p.Dialog,{header:"Search Slots",visible:i,onHide:function(){return r(!1)},resizable:!1,breakpoints:{"1024px":"75vw","640px":"100vw"},style:{width:"30vw"},children:[Object(B.jsx)("div",{className:"p-grid",children:Object(B.jsx)("div",{className:"p-col p-d-flex p-jc-center",children:Object(B.jsx)(u.SelectButton,{value:y,options:[{label:"By Pin",value:"searchByPin"},{label:"By District",value:"searchByDistrict"}],onChange:function(e){var t;null===(t=e.value)?S(y):(S(t),v&&v.current&&v.current.clear())}})})}),Object(B.jsx)(d.Divider,{className:"p-mt-1"}),Object(B.jsxs)("div",{className:"p-grid",children:[t,Object(B.jsx)("div",{className:"p-col-12",children:Object(B.jsx)(O.Calendar,{id:"basic",dateFormat:"dd-mm-yy",value:ee,minDate:new Date,maxDate:ue,onChange:function(e){return te(e.value)},className:"p-col-12 p-p-0"})}),Object(B.jsxs)("div",{className:"p-col-12",children:[Object(B.jsx)(m.Checkbox,{checked:J,onChange:function(e){return W(e.checked)},inputId:"futureDates",disabled:Y}),Object(B.jsx)("label",{htmlFor:"futureDates",className:"p-checkbox-label  p-ml-2",children:"Show for future dates"})]}),Object(B.jsxs)("div",{className:"p-col-12",children:[Object(B.jsx)(m.Checkbox,{checked:z,onChange:function(e){return X(e.checked)},inputId:"autoRefresh",disabled:Y}),Object(B.jsx)("label",{htmlFor:"autoRefresh",className:"p-checkbox-label  p-ml-2",children:"Auto refresh"})]}),Object(B.jsx)("div",{className:"p-col-12",children:Object(B.jsx)(o.Button,{label:"Find slot",className:"p-button p-col-12",onClick:function(){"searchByPin"===y?de():"searchByDistrict"===y&&je()},disabled:Y})}),Y&&Object(B.jsx)("div",{className:"p-col-12",children:Object(B.jsx)(o.Button,{label:"Stop search",className:"p-button p-col-12",onClick:function(){clearInterval&&clearInterval(D),K(!1)}})}),Object(B.jsx)(f.Messages,{ref:v,className:"p-col-12 searchFieldErrorMessage"})]}),Object(B.jsx)(d.Divider,{className:"p-mt-2"}),Object(B.jsxs)(j.Card,{className:"disclaimer",children:[Object(B.jsxs)("p",{children:["Do not close the browser if ",Object(B.jsx)("b",{children:"'Auto refresh'"})," is selected. Once any slot is available the details will be displayed and you will also get a notification sound."]}),Object(B.jsx)("p",{children:"Disclaimer : While we have real-time data, slot availability on CoWin changes rapidly. If you see availability, please book on CoWin instantly before the slots are lost."})]})]})})}var _=a(19);function I(e){var t=e.displaySubscribeDialog,a=e.setDisplaySubscribeDialog,c=Object(s.useState)(""),i=Object(l.a)(c,2),r=i[0],u=i[1],d=Object(s.useState)(""),j=Object(l.a)(d,2),b=j[0],m=j[1],h=Object(s.useState)(!1),f=Object(l.a)(h,2),O=f[0],v=f[1];return Object(B.jsx)(n.a.Fragment,{children:Object(B.jsxs)(p.Dialog,{header:"Subscribe slots notification",visible:t,onHide:function(){return a(!1)},resizable:!1,breakpoints:{1200:"75vw","640px":"100vw"},style:{width:"30vw"},children:[Object(B.jsx)(_.InputText,{value:b,onChange:function(e){return function(e){m(e);var t=/^[1-9][0-9]{5}$/;v(e.split(",").every((function(e){return t.test(e)})))}(e.target.value)},className:"p-col-12",placeholder:"Enter Pincode(use , from multiple)"}),Object(B.jsx)(_.InputText,{value:r,onChange:function(e){return u(e.value)},className:"p-col-12",style:{marginTop:"1rem"},placeholder:"Enter email id"}),Object(B.jsx)("div",{className:"p-col-12",style:{padding:"0.5rem 0"},children:Object(B.jsx)(o.Button,{label:"Subscribe",className:"p-button p-col-12",onClick:function(){b.split(",").forEach((function(e){e.startsWith(0)||console.log(e)}))},style:{marginTop:"0.5rem"},disabled:!O})})]})})}function A(e){var t=e.states,a=e.setDataSet,c=Object(s.useState)(!1),i=Object(l.a)(c,2),u=i[0],d=i[1],j=Object(s.useState)(!1),p=Object(l.a)(j,2),b=p[0],m=p[1];Object(s.useEffect)((function(){d(!0)}),[]);var h=[{template:function(){return Object(B.jsxs)(n.a.Fragment,{children:[Object(B.jsx)(o.Button,{label:"Search Slots",icon:"pi pi-bell",className:"p-button-raised p-mr-2",onClick:function(){return d(!0)}}),Object(B.jsx)(P,{statesList:t,setDataSet:a,displaySearchDialog:u,setDisplaySearchDialog:d})]})}},{template:function(){return Object(B.jsxs)(n.a.Fragment,{children:[Object(B.jsx)(o.Button,{label:"Notify Slots",icon:"pi pi-bell",className:"p-button-raised p-mr-2",onClick:function(){return m(!0)}}),Object(B.jsx)(I,{displaySubscribeDialog:b,setDisplaySubscribeDialog:m})]})}},{template:function(){return Object(B.jsx)(o.Button,{label:"About Us",icon:"pi pi-users",className:"p-button-raised p-mr-2"})}},{template:function(){return Object(B.jsx)(o.Button,{label:"Donate",icon:"pi pi-bell",className:"p-button-raised p-mr-2"})}}];return Object(B.jsx)(n.a.Fragment,{children:Object(B.jsx)("div",{className:"card appMenuBar",children:Object(B.jsx)(r.Menubar,{model:h})})})}var E=a(42),L=a(12),M=a(20),T=a(33),V=function(e){return Object(B.jsxs)(n.a.Fragment,{children:[Object(B.jsxs)("h3",{className:"nameColumn p-m-0 p-p-0",children:[e.name,", ",e.district_name]}),Object(B.jsx)("br",{}),Object(B.jsxs)("h5",{className:"p-m-0 p-p-0",style:{color:"blue"},children:[Object(B.jsx)("i",{className:"pi pi-map-marker"}),Object(B.jsxs)("span",{className:"p-ml-1",children:[e.address,", ",e.district_name]})]})]})},R=function(e){return Object(B.jsxs)(n.a.Fragment,{children:[Object(B.jsx)("span",{className:"p-column-title",children:"District"}),Object(B.jsx)("span",{className:"image-text",children:e.pincode})]})},H=function(e){return Object(B.jsxs)(n.a.Fragment,{children:[Object(B.jsx)("span",{className:"p-column-title",children:"Dose (Slots)"}),Object(B.jsx)("span",{className:"image-text",children:e.dose}),Object(B.jsx)(T.Badge,{value:e.doseCapacity,severity:"success",className:"p-ml-2"})]})},J=function(e){return Object(B.jsxs)(n.a.Fragment,{children:[Object(B.jsx)("span",{className:"p-column-title",children:"Fee (Price)"}),Object(B.jsx)("span",{className:"image-text",children:e.fee_type}),"Paid"===e.fee_type&&Object(B.jsx)(T.Badge,{value:e.fee,severity:"danger",className:"p-ml-2"})]})},W=function(e){return Object(B.jsxs)(n.a.Fragment,{children:[Object(B.jsx)("span",{className:"p-column-title",children:"Age"}),Object(B.jsx)("span",{className:"image-text",children:e.age})]})},G=function(e){return Object(B.jsxs)(n.a.Fragment,{children:[Object(B.jsx)("span",{className:"p-column-title",children:"Vaccine"}),Object(B.jsx)("span",{className:"image-text",children:e.vaccine})]})},U=function(e){return Object(B.jsxs)(n.a.Fragment,{children:[Object(B.jsx)("span",{className:"p-column-title",children:"Date"}),Object(B.jsx)("span",{children:e.date})]})},z=function(e){return Object(B.jsx)("div",{className:"p-multiselect-representative-option",children:Object(B.jsx)("span",{className:"image-text",children:e.name})})},X=function(e){return Object(B.jsx)("div",{children:Object(B.jsx)("span",{className:"image-text",children:e.name})})},$=function(e){return Object(B.jsx)("div",{children:Object(B.jsx)("span",{className:"image-text",children:e.name})})},q=a.p+"static/media/beep.40e5c7db.mp3";function Y(e){var t=e.dataSet,a=(e.dataTableDimensions,Object(s.useRef)(null)),n=Object(s.useRef)(null),c=Object(s.useState)(""),i=Object(l.a)(c,2),r=i[0],u=i[1],d=Object(s.useState)(null),j=Object(l.a)(d,2),p=j[0],b=j[1],m=Object(s.useState)(null),h=Object(l.a)(m,2),f=h[0],v=h[1],x=Object(s.useState)(null),g=Object(l.a)(x,2),S=g[0],D=g[1],N=Object(s.useState)(null),w=Object(l.a)(N,2),C=w[0],F=w[1],k=Object(s.useState)(null),P=Object(l.a)(k,2),I=P[0],A=P[1],T=Object(s.useState)("play"),Y=Object(l.a)(T,2),K=Y[0],Q=Y[1];Object(s.useEffect)((function(){if(sessionStorage.getItem("configuration")){var e=JSON.parse(sessionStorage.getItem("configuration")).isPlayState;Q(e||"play")}}),[]),Object(s.useEffect)((function(){sessionStorage.setItem("configuration",JSON.stringify({isPlayState:K}))}),[K]),Object(s.useEffect)((function(){t.slotList.length&&"play"===K&&n.current.play()}),[t]);var Z=Object(B.jsxs)("div",{className:"table-header p-grid p-m-0",children:[Object(B.jsx)(o.Button,{icon:"pi ".concat("play"===K?"pi-volume-up":"pi-volume-off"),className:"p-d-none p-mr-2 p-d-md-inline",onClick:function(){return Q("play"===K?"pause":"play")}}),Object(B.jsxs)("div",{className:"p-inputgroup p-col-12 p-md-5 p-lg-3 p-p-0",children:[Object(B.jsx)(_.InputText,{type:"search",value:r,onChange:function(e){return u(e.target.value)},placeholder:"Global Search"}),Object(B.jsx)(o.Button,{icon:"pi pi-filter-slash",onClick:function(){b(null),A(null),v(null),D(null),F(null),u(""),a.current.reset()}})]})]}),ee=Object(B.jsx)(M.MultiSelect,{value:p,options:[{name:"Dose1",value:"Dose1"},{name:"Dose2",value:"Dose2"}],itemTemplate:z,onChange:function(e){a.current.filter(e.value,"dose","in"),b(e.value)},optionLabel:"name",optionValue:"value",placeholder:"All",className:"p-column-filter"}),te=Object(B.jsx)(M.MultiSelect,{value:f,options:[{name:"Free",value:"Free"},{name:"Paid",value:"Paid"}],itemTemplate:X,onChange:function(e){a.current.filter(e.value,"fee_type","in"),v(e.value)},optionLabel:"name",optionValue:"value",placeholder:"All",className:"p-column-filter"}),ae=Object(B.jsx)(M.MultiSelect,{value:S,options:[{name:"Age 18+",value:"Age 18+"},{name:"Age 45+",value:"Age 45+"}],itemTemplate:$,onChange:function(e){a.current.filter(e.value,"age","in"),D(e.value)},optionLabel:"name",optionValue:"value",placeholder:"All",className:"p-column-filter"}),se=Object(B.jsx)(M.MultiSelect,{value:C,options:[{name:"COVISHIELD",value:"COVISHIELD"},{name:"COVAXIN",value:"COVAXIN"}],onChange:function(e){a.current.filter(e.value,"vaccine","in"),F(e.value)},optionLabel:"name",optionValue:"value",placeholder:"All",style:{width:"100%"}}),ne=Object(B.jsx)(O.Calendar,{value:I,onChange:function(e){a.current.filter(e.value,"date","custom"),A(e.value)},dateFormat:"dd-mm-yy",className:"p-column-filter",placeholder:"Date"});return Object(B.jsxs)("div",{className:"datatable-slots-container",children:[Object(B.jsx)("div",{className:"card",children:Object(B.jsxs)(E.DataTable,{ref:a,value:t.slotList,paginator:!0,rows:10,header:Z,className:"p-datatable-slots p-datatable-gridlines p-datatable-striped p-datatable-lg",globalFilter:r,emptyMessage:Object(B.jsx)("h2",{style:{color:"red"},children:t.errorMessage}),paginatorPosition:"top",alwaysShowPaginator:!1,children:[Object(B.jsx)(L.Column,{style:{width:"25%"},field:"name",header:"Name",body:V,sortable:!0}),Object(B.jsx)(L.Column,{style:{width:"10%"},field:"pincode",header:"Pincode",body:R,sortable:!0}),Object(B.jsx)(L.Column,{field:"date",header:"Date",body:U,filter:!0,filterElement:ne,filterFunction:y}),Object(B.jsx)(L.Column,{field:"dose",header:"Dose (Slots)",body:H,filter:!0,filterElement:ee}),Object(B.jsx)(L.Column,{field:"fee_type",header:"Fee",body:J,filter:!0,filterElement:te}),Object(B.jsx)(L.Column,{field:"age",header:"Age",body:W,filter:!0,filterElement:ae}),Object(B.jsx)(L.Column,{field:"vaccine",header:"Vaccine",body:G,filter:!0,filterElement:se})]})}),Object(B.jsx)("audio",{ref:n,children:Object(B.jsx)("source",{src:q})})]})}var K=a(43);function Q(){var e=Object(s.useRef)(null),t=Object(s.useState)([]),a=Object(l.a)(t,2),c=a[0],i=a[1],r=Object(s.useState)(h()),o=Object(l.a)(r,2),u=o[0],d=(o[1],Object(s.useState)({errorMessage:"Start searching to view slots availability",timeStamp:"",slotList:[]})),p=Object(l.a)(d,2),b=p[0],m=p[1];function h(){return window.innerHeight-100+"px"}return Object(s.useEffect)((function(){k({url:"https://cdn-api.co-vin.in/api/v2/admin/location/states"}).then((function(e){return e.json()})).then((function(e){return i(e.states)})).catch((function(t){e.current.show({severity:"error",summary:"Unable to fetch states from Cowin portal",detail:"Please reload or continue search using pincode.",sticky:!0})}))}),[]),Object(B.jsx)(n.a.Fragment,{children:Object(B.jsx)("div",{className:"p-grid full-height",children:Object(B.jsx)("div",{className:"p-col-12 full-height",children:Object(B.jsxs)("div",{className:"p-grid",children:[Object(B.jsx)(K.Toast,{ref:e,position:"bottom-right"}),Object(B.jsx)("div",{className:"p-col-12 p-mb-0",children:Object(B.jsx)(A,{states:c,setDataSet:function(t){e.current.show({severity:"info",summary:"Checked cowin portal at: ",detail:t.timeStamp,life:3e3}),m(t)}})}),Object(B.jsx)("div",{className:"p-col-12 bottom-panel",children:Object(B.jsx)(j.Card,{className:"p-col-12",children:Object(B.jsx)(Y,{dataSet:b,dataTableDimensions:u})})})]})})})})}var Z=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,107)).then((function(t){var a=t.getCLS,s=t.getFID,n=t.getFCP,c=t.getLCP,i=t.getTTFB;a(e),s(e),n(e),c(e),i(e)}))};a(100),a(101),a(102),a(103),a(104),a(105);i.a.render(Object(B.jsx)(n.a.StrictMode,{children:Object(B.jsx)(Q,{})}),document.getElementById("root")),Z()}},[[106,1,2]]]);
//# sourceMappingURL=main.1f9fa157.chunk.js.map