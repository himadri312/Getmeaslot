(this["webpackJsonpget-me-a-slot"]=this["webpackJsonpget-me-a-slot"]||[]).push([[0],{104:function(e,t,a){},105:function(e,t,a){},106:function(e,t,a){"use strict";a.r(t);var c=a(0),s=a.n(c),n=a(10),i=a.n(n),l=a(4),r=a(38),o=a(8),u=a(39),d=a(30),p=a(24),b=a(25),j=a(40),m=a(31),h=a(32),f=a(41),O=a(26),v=a(12),g=a.n(v),x=a(19);function y(e,t){return void 0===t||null===t||"string"===typeof t&&""===t.trim()||void 0!==e&&null!==e&&e===S(t)}function S(e){var t=e.getMonth()+1,a=e.getDate();return t<10&&(t="0"+t),a<10&&(a="0"+a),a+"-"+t+"-"+e.getFullYear()}var D,N=a(9),C=function(e,t){return{errorMessage:"Not able to connect Cowin server at ".concat(t,". If auto refresh is not checked please search again"),timeStamp:t,slotList:[]}},w=function(e,t){var a="";return e.vaccine_fees&&e.vaccine_fees.length&&e.vaccine_fees.forEach((function(e){e.vaccine===t&&(a=e.fee)})),a},_=function(e){var t="",a=S(e.selectedDate);"searchByPin"===e.selectedSearch?t=e.showFutureDates?"https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/calendarByPin?pincode="+e.pin+"&date="+a:"https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/findByPin?pincode="+e.pin+"&date="+a:"searchByDistrict"===e.selectedSearch&&(t=e.showFutureDates?"https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/calendarByDistrict?district_id="+e.selectedDistrict+"&date="+a:"https://cdn-api.co-vin.in/api/v2/appointment/sessions/public/findByDistrict?district_id="+e.selectedDistrict+"&date="+a),e.showFutureDates?(F({url:t,setDataSet:e.setDataSet}),e.autoRefresh&&(D=setInterval(Object(x.a)(g.a.mark((function a(){return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:F({url:t,setDataSet:e.setDataSet});case 1:case"end":return a.stop()}}),a)}))),5e3))):(k({url:t,setDataSet:e.setDataSet}),e.autoRefresh&&(D=setInterval(Object(x.a)(g.a.mark((function a(){return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:k({url:t,setDataSet:e.setDataSet});case 1:case"end":return a.stop()}}),a)}))),5e3)))},F=function(e){var t=e.url,a=e.setDataSet;if(t){var c=(new Date).toLocaleString();fetch(t,{headers:{Accept:"application/json"}}).then((function(e){return e.json()})).then((function(e){return a(function(e,t){console.log(e);var a={errorMessage:"",timeStamp:t,slotList:[]};return e.forEach((function(e){var t={name:e.name,address:e.address,district_name:e.district_name,pincode:e.pincode,fee_type:e.fee_type};e.sessions.forEach((function(c){var s={date:c.date,age:18===e.min_age_limit?"Age 18+":"Age 45+",fee:"Paid"===e.fee_type?w(e,c.vaccine):"",vaccine:c.vaccine};c.available_capacity_dose1&&a.slotList.push(Object(N.a)(Object(N.a)(Object(N.a)({},t),s),{},{dose:"Dose1",doseCapacity:c.available_capacity_dose1})),c.available_capacity_dose2&&a.slotList.push(Object(N.a)(Object(N.a)(Object(N.a)({},t),s),{},{dose:"Dose2",doseCapacity:c.available_capacity_dose2}))}))})),a.slotList.length||(a.errorMessage="No slots available. Please refine search criteria"),a}(e.centers,c))})).catch((function(e){return a(C(0,c))}))}},k=function(e){var t=e.url,a=e.setDataSet;if(t){var c=(new Date).toLocaleString();fetch(t,{headers:{Accept:"application/json"}}).then((function(e){return e.json()})).then((function(e){return a(function(e,t){var a={errorMessage:"",timeStamp:t,slotList:[]};return console.log(e),e.forEach((function(e){var t={name:e.name,address:e.address,district_name:e.district_name,pincode:e.pincode,fee_type:e.fee_type,fee:e.fee,date:e.date,age:18===e.min_age_limit?"Age 18+":"Age 45+",vaccine:e.vaccine};e.available_capacity_dose1&&a.slotList.push(Object(N.a)(Object(N.a)({},t),{},{dose:"Dose1",doseCapacity:e.available_capacity_dose1})),e.available_capacity_dose2&&a.slotList.push(Object(N.a)(Object(N.a)({},t),{},{dose:"Dose2",doseCapacity:e.available_capacity_dose2}))})),a.slotList.length||(a.errorMessage="No slots available. Please refine search criteria"),a}(e.sessions,c))})).catch((function(e){return a(C(0,c))}))}},B=function(){var e=Object(x.a)(g.a.mark((function e(t){var a,c,s,n;return g.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(n in a=t.url,c=t.requestParams,s="",c)s=0===s.length?"?"+n+"="+c[n]:s+"&"+n+"="+c[n];return e.abrupt("return",fetch(a+s,{method:"GET",headers:{Accept:"application/json"}}));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P=a(1);function L(e){var t,a=e.statesList,n=e.setDataSet,i=e.displaySearchDialog,r=e.setDisplaySearchDialog,v=Object(c.useRef)(null),g=Object(c.useState)("searchByPin"),x=Object(l.a)(g,2),y=x[0],S=x[1],N=Object(c.useState)(),C=Object(l.a)(N,2),w=C[0],F=C[1],k=Object(c.useState)(""),L=Object(l.a)(k,2),I=L[0],E=L[1],A=Object(c.useState)(""),M=Object(l.a)(A,2),V=M[0],T=M[1],R=Object(c.useState)(!1),H=Object(l.a)(R,2),J=H[0],W=H[1],G=Object(c.useState)(!1),U=Object(l.a)(G,2),z=U[0],X=U[1],$=Object(c.useState)(!1),q=Object(l.a)($,2),Y=q[0],K=q[1],Q=Object(c.useState)(new Date),Z=Object(l.a)(Q,2),ee=Z[0],te=Z[1],ae=Object(c.useState)([]),ce=Object(l.a)(ae,2),se=ce[0],ne=ce[1],ie=Object(c.useState)(!0),le=Object(l.a)(ie,2),re=le[0],oe=le[1],ue=new Date;ue.setDate(ue.getDate()+7);var de=function(){/^[1-9][0-9]{5}$/.test(w)?(r(!1),z&&K(!0),_({selectedSearch:y,pin:w,selectedDate:ee,autoRefresh:z,showFutureDates:J,setDataSet:n})):v&&v.current&&v.current.show({sticky:!0,severity:"error",summary:"Invalid pincode"})},pe=function(){V?(r(!1),z&&K(!0),_({selectedSearch:y,selectedDistrict:V,selectedDate:ee,autoRefresh:z,showFutureDates:J,setDataSet:n})):v&&v.current&&v.current.show({sticky:!0,severity:"error",summary:"Please select district"})};return t="searchByPin"===y?Object(P.jsxs)(s.a.Fragment,{children:[Object(P.jsx)(j.InputNumber,{value:w,onChange:function(e){return F(e.value)},className:"p-col-12",placeholder:"Enter Pincode",useGrouping:!1,disabled:Y}),Object(P.jsx)("div",{className:"p-col-12"})]}):"searchByDistrict"===y?Object(P.jsxs)(s.a.Fragment,{children:[Object(P.jsx)(h.Dropdown,{optionLabel:"state_name",optionValue:"state_id",value:I,options:a,onChange:function(e){return t=e.value,oe(!t),E(t),void B({url:"https://cdn-api.co-vin.in/api/v2/admin/location/districts"+"/".concat(t)}).then((function(e){return e.json()})).then((function(e){v&&v.current&&v.current.clear(),ne(e.districts)})).catch((function(e){v&&v.current&&(v.current.show({sticky:!0,severity:"error",summary:"Unable to fetch districts. Try again"}),ne([]))}));var t},placeholder:"Select state",className:"p-col-12",disabled:Y}),Object(P.jsx)(h.Dropdown,{optionLabel:"district_name",optionValue:"district_id",value:V,options:se,onChange:function(e){return T(e.value)},className:"p-col-12",placeholder:"Select district",disabled:re||Y})]}):Object(P.jsx)("div",{children:"Something went wrong. Please reload"}),Object(P.jsx)(s.a.Fragment,{children:Object(P.jsxs)(b.Dialog,{header:"Search Slots",visible:i,onHide:function(){return r(!1)},resizable:!1,breakpoints:{"1024px":"75vw","640px":"100vw"},style:{width:"30vw"},children:[Object(P.jsx)("div",{className:"p-grid",children:Object(P.jsx)("div",{className:"p-col p-d-flex p-jc-center",children:Object(P.jsx)(u.SelectButton,{value:y,options:[{label:"By Pin",value:"searchByPin"},{label:"By District",value:"searchByDistrict"}],onChange:function(e){var t;null===(t=e.value)?S(y):(S(t),v&&v.current&&v.current.clear())}})})}),Object(P.jsx)(d.Divider,{className:"p-mt-1"}),Object(P.jsxs)("div",{className:"p-grid",children:[t,Object(P.jsx)("div",{className:"p-col-12",children:Object(P.jsx)(O.Calendar,{id:"basic",dateFormat:"dd-mm-yy",value:ee,minDate:new Date,maxDate:ue,onChange:function(e){return te(e.value)},className:"p-col-12 p-p-0",disabled:Y})}),Object(P.jsxs)("div",{className:"p-col-12",children:[Object(P.jsx)(m.Checkbox,{checked:J,onChange:function(e){return W(e.checked)},inputId:"futureDates",disabled:Y}),Object(P.jsx)("label",{htmlFor:"futureDates",className:"p-checkbox-label  p-ml-2",children:"Show for future dates"})]}),Object(P.jsxs)("div",{className:"p-col-12",children:[Object(P.jsx)(m.Checkbox,{checked:z,onChange:function(e){return X(e.checked)},inputId:"autoRefresh",disabled:Y}),Object(P.jsx)("label",{htmlFor:"autoRefresh",className:"p-checkbox-label  p-ml-2",children:"Auto refresh"})]}),Object(P.jsx)("div",{className:"p-col-12",children:Object(P.jsx)(o.Button,{label:"Find slot",className:"p-button p-col-12",onClick:function(){"searchByPin"===y?de():"searchByDistrict"===y&&pe()},disabled:Y})}),Y&&Object(P.jsx)("div",{className:"p-col-12",children:Object(P.jsx)(o.Button,{label:"Stop search",className:"p-button p-col-12",onClick:function(){clearInterval&&clearInterval(D),K(!1)}})}),Object(P.jsx)(f.Messages,{ref:v,className:"p-col-12 searchFieldErrorMessage"})]}),Object(P.jsx)(d.Divider,{className:"p-mt-2"}),Object(P.jsxs)(p.Card,{className:"disclaimer",children:[Object(P.jsxs)("p",{children:["Do not close the browser if ",Object(P.jsx)("b",{children:"'Auto refresh'"})," is selected. Once any slot is available the details will be displayed and you will also get a notification sound."]}),Object(P.jsx)("p",{children:"Disclaimer : While we have real-time data, slot availability on CoWin changes rapidly. If you see availability, please book on CoWin instantly before the slots are lost."})]})]})})}var I=a(20);function E(e){var t=e.displaySubscribeDialog,a=e.setDisplaySubscribeDialog,n=Object(c.useState)(""),i=Object(l.a)(n,2),r=i[0],u=i[1],d=Object(c.useState)(""),p=Object(l.a)(d,2),j=p[0],m=p[1],h=Object(c.useState)(!1),f=Object(l.a)(h,2),O=f[0],v=f[1];return Object(P.jsx)(s.a.Fragment,{children:Object(P.jsxs)(b.Dialog,{header:"Subscribe slots notification",visible:t,onHide:function(){return a(!1)},resizable:!1,breakpoints:{1200:"75vw","640px":"100vw"},style:{width:"30vw"},children:[Object(P.jsx)(I.InputText,{value:j,onChange:function(e){return function(e){m(e);var t=/^[1-9][0-9]{5}$/;v(e.split(",").every((function(e){return t.test(e)})))}(e.target.value)},className:"p-col-12",placeholder:"Enter Pincode(use , from multiple)"}),Object(P.jsx)(I.InputText,{value:r,onChange:function(e){return u(e.value)},className:"p-col-12",style:{marginTop:"1rem"},placeholder:"Enter email id"}),Object(P.jsx)("div",{className:"p-col-12",style:{padding:"0.5rem 0"},children:Object(P.jsx)(o.Button,{label:"Subscribe",className:"p-button p-col-12",onClick:function(){j.split(",").forEach((function(e){e.startsWith(0)||console.log(e)}))},style:{marginTop:"0.5rem"},disabled:!O})})]})})}function A(e){var t=e.states,a=e.setDataSet,n=Object(c.useState)(!1),i=Object(l.a)(n,2),u=i[0],d=i[1],p=Object(c.useState)(!1),b=Object(l.a)(p,2),j=b[0],m=b[1];Object(c.useEffect)((function(){d(!0)}),[]);var h=[{template:function(){return Object(P.jsxs)(s.a.Fragment,{children:[Object(P.jsx)(o.Button,{label:"Search Slots",icon:"pi pi-bell",className:"p-button-raised p-mr-2",onClick:function(){return d(!0)}}),Object(P.jsx)(L,{statesList:t,setDataSet:a,displaySearchDialog:u,setDisplaySearchDialog:d})]})}},{template:function(){return Object(P.jsxs)(s.a.Fragment,{children:[Object(P.jsx)(o.Button,{label:"Notify Slots",icon:"pi pi-bell",className:"p-button-raised p-mr-2",onClick:function(){return m(!0)}}),Object(P.jsx)(E,{displaySubscribeDialog:j,setDisplaySubscribeDialog:m})]})}},{template:function(){return Object(P.jsx)(o.Button,{label:"About Us",icon:"pi pi-users",className:"p-button-raised p-mr-2"})}},{template:function(){return Object(P.jsx)(o.Button,{label:"Donate",icon:"pi pi-bell",className:"p-button-raised p-mr-2"})}}];return Object(P.jsx)(s.a.Fragment,{children:Object(P.jsx)("div",{className:"card appMenuBar",children:Object(P.jsx)(r.Menubar,{model:h})})})}var M=a(42),V=a(13),T=a(21),R=a(33),H=function(e){return Object(P.jsxs)(s.a.Fragment,{children:[Object(P.jsxs)("h3",{className:"nameColumn p-m-0 p-p-0",children:[e.name,", ",e.district_name]}),Object(P.jsxs)("h5",{className:"p-m-0 p-p-0",style:{color:"blue"},children:[Object(P.jsx)("i",{className:"pi pi-map-marker"}),Object(P.jsx)("span",{className:"p-ml-1",children:e.address})]})]})},J=function(e){return Object(P.jsxs)(s.a.Fragment,{children:[Object(P.jsx)("span",{className:"p-column-title",children:"District"}),Object(P.jsx)("span",{className:"image-text",children:e.pincode})]})},W=function(e){return Object(P.jsxs)(s.a.Fragment,{children:[Object(P.jsx)("span",{className:"p-column-title",children:"Dose (Slots)"}),Object(P.jsx)("span",{className:"image-text",children:e.dose}),Object(P.jsx)(R.Badge,{value:e.doseCapacity,severity:"success",className:"p-ml-2"})]})},G=function(e){return Object(P.jsxs)(s.a.Fragment,{children:[Object(P.jsx)("span",{className:"p-column-title",children:"Fee (Price)"}),Object(P.jsx)("span",{className:"image-text",children:e.fee_type}),"Paid"===e.fee_type&&e.fee&&Object(P.jsx)(R.Badge,{value:e.fee,severity:"danger",className:"p-ml-2"})]})},U=function(e){return Object(P.jsxs)(s.a.Fragment,{children:[Object(P.jsx)("span",{className:"p-column-title",children:"Age"}),Object(P.jsx)("span",{className:"image-text",children:e.age})]})},z=function(e){return Object(P.jsxs)(s.a.Fragment,{children:[Object(P.jsx)("span",{className:"p-column-title",children:"Vaccine"}),Object(P.jsx)("span",{className:"image-text",children:e.vaccine})]})},X=function(e){return Object(P.jsxs)(s.a.Fragment,{children:[Object(P.jsx)("span",{className:"p-column-title",children:"Date"}),Object(P.jsx)("span",{children:e.date})]})},$=a.p+"static/media/beep.40e5c7db.mp3";function q(e){var t=e.dataSet,a=Object(c.useRef)(null),s=Object(c.useRef)(null),n=Object(c.useState)(""),i=Object(l.a)(n,2),r=i[0],u=i[1],d=Object(c.useState)(null),p=Object(l.a)(d,2),b=p[0],j=p[1],m=Object(c.useState)(null),h=Object(l.a)(m,2),f=h[0],v=h[1],g=Object(c.useState)(null),x=Object(l.a)(g,2),S=x[0],D=x[1],N=Object(c.useState)(null),C=Object(l.a)(N,2),w=C[0],_=C[1],F=Object(c.useState)(null),k=Object(l.a)(F,2),B=k[0],L=k[1],E=Object(c.useState)("play"),A=Object(l.a)(E,2),R=A[0],q=A[1];Object(c.useEffect)((function(){if(sessionStorage.getItem("configuration")){var e=JSON.parse(sessionStorage.getItem("configuration")).isPlayState;q(e||"play")}}),[]),Object(c.useEffect)((function(){sessionStorage.setItem("configuration",JSON.stringify({isPlayState:R}))}),[R]),Object(c.useEffect)((function(){s&&s.current&&t.slotList.length&&"play"===R&&s.current.play()}),[t]);var Y=Object(P.jsxs)("div",{className:"table-header p-grid p-m-0",children:[Object(P.jsx)(o.Button,{icon:"pi ".concat("play"===R?"pi-volume-up":"pi-volume-off"),className:"p-d-none p-mr-2 p-d-md-inline",onClick:function(){return q("play"===R?"pause":"play")}}),Object(P.jsxs)("div",{className:"p-inputgroup p-col-12 p-md-5 p-lg-3 p-p-0",children:[Object(P.jsx)(I.InputText,{type:"search",value:r,onChange:function(e){return u(e.target.value)},placeholder:"Global Search"}),Object(P.jsx)(o.Button,{icon:"pi pi-filter-slash",onClick:function(){j(null),L(null),v(null),D(null),_(null),u(""),a.current.reset()}})]})]}),K=Object(P.jsx)(T.MultiSelect,{value:b,options:[{name:"Dose1",value:"Dose1"},{name:"Dose2",value:"Dose2"}],onChange:function(e){a.current.filter(e.value,"dose","in"),j(e.value)},optionLabel:"name",optionValue:"value",placeholder:"All",className:"p-column-filter"}),Q=Object(P.jsx)(T.MultiSelect,{value:f,options:[{name:"Free",value:"Free"},{name:"Paid",value:"Paid"}],onChange:function(e){a.current.filter(e.value,"fee_type","in"),v(e.value)},optionLabel:"name",optionValue:"value",placeholder:"All",className:"p-column-filter"}),Z=Object(P.jsx)(T.MultiSelect,{value:S,options:[{name:"Age 18+",value:"Age 18+"},{name:"Age 45+",value:"Age 45+"}],onChange:function(e){a.current.filter(e.value,"age","in"),D(e.value)},optionLabel:"name",optionValue:"value",placeholder:"All",className:"p-column-filter"}),ee=Object(P.jsx)(T.MultiSelect,{value:w,options:[{name:"COVISHIELD",value:"COVISHIELD"},{name:"COVAXIN",value:"COVAXIN"}],onChange:function(e){a.current.filter(e.value,"vaccine","in"),_(e.value)},optionLabel:"name",optionValue:"value",placeholder:"All",className:"p-column-filter"}),te=Object(P.jsx)(O.Calendar,{value:B,onChange:function(e){a.current.filter(e.value,"date","custom"),L(e.value)},dateFormat:"dd-mm-yy",className:"p-column-filter",placeholder:"Date"});return Object(P.jsxs)("div",{className:"datatable-slots-container",children:[Object(P.jsx)("div",{className:"card",children:Object(P.jsxs)(M.DataTable,{ref:a,value:t.slotList,paginator:!0,rows:10,header:Y,className:"p-datatable-slots p-datatable-gridlines p-datatable-striped p-datatable-lg",globalFilter:r,emptyMessage:Object(P.jsxs)("h2",{style:{color:"red"},children:["  ",t.errorMessage]}),paginatorPosition:"top",alwaysShowPaginator:!1,children:[Object(P.jsx)(V.Column,{style:{width:"25%"},field:"name",header:"Name",body:H,sortable:!0}),Object(P.jsx)(V.Column,{style:{width:"10%"},field:"pincode",header:"Pincode",body:J,sortable:!0}),Object(P.jsx)(V.Column,{field:"date",header:"Date",body:X,filter:!0,filterElement:te,filterFunction:y}),Object(P.jsx)(V.Column,{field:"dose",header:"Dose (No of Slots)",body:W,filter:!0,filterElement:K}),Object(P.jsx)(V.Column,{field:"fee_type",header:"Fee (Price)",body:G,filter:!0,filterElement:Q}),Object(P.jsx)(V.Column,{field:"age",header:"Age",body:U,filter:!0,filterElement:Z}),Object(P.jsx)(V.Column,{field:"vaccine",header:"Vaccine",body:z,filter:!0,filterElement:ee})]})}),Object(P.jsx)("audio",{ref:s,children:Object(P.jsx)("source",{src:$})})]})}var Y=a(43);function K(){var e=Object(c.useRef)(null),t=Object(c.useState)([]),a=Object(l.a)(t,2),n=a[0],i=a[1],r=Object(c.useState)({errorMessage:"Start searching to view slots availability",timeStamp:"",slotList:[]}),o=Object(l.a)(r,2),u=o[0],d=o[1];return Object(c.useEffect)((function(){B({url:"https://cdn-api.co-vin.in/api/v2/admin/location/states"}).then((function(e){return e.json()})).then((function(e){return i(e.states)})).catch((function(t){e&&e.current&&e.current.show({severity:"error",summary:"Unable to fetch states from Cowin portal",detail:"Please reload or continue search using pincode.",sticky:!0})}))}),[]),Object(P.jsx)(s.a.Fragment,{children:Object(P.jsx)("div",{className:"p-grid full-height",children:Object(P.jsx)("div",{className:"p-col-12",children:Object(P.jsxs)("div",{className:"p-grid",children:[Object(P.jsx)(Y.Toast,{ref:e,position:"bottom-right"}),Object(P.jsx)("div",{className:"p-col-12 p-mb-0",children:Object(P.jsx)(A,{states:n,setDataSet:function(t){e&&e.current&&e.current.show({severity:"info",summary:"Checked cowin portal at: ",detail:t.timeStamp,life:3e3}),d(t)}})}),Object(P.jsx)("div",{className:"p-col-12 bottom-panel",children:Object(P.jsx)(p.Card,{className:"p-col-12",children:Object(P.jsx)(q,{dataSet:u})})})]})})})})}var Q=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,107)).then((function(t){var a=t.getCLS,c=t.getFID,s=t.getFCP,n=t.getLCP,i=t.getTTFB;a(e),c(e),s(e),n(e),i(e)}))};a(100),a(101),a(102),a(103),a(104),a(105);i.a.render(Object(P.jsx)(s.a.StrictMode,{children:Object(P.jsx)(K,{})}),document.getElementById("root")),Q()}},[[106,1,2]]]);
//# sourceMappingURL=main.7919b21e.chunk.js.map